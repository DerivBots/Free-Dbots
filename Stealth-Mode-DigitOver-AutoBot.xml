<xml xmlns="http://www.w3.org/1999/xhtml" collection="false">
  <variables>
    <variable type="" id="bodyThreshold">Body Threshold</variable>
    <variable type="" id="shadowMultiplier">Shadow Multiplier</variable>
  </variables>
  <block type="strategy" id="Doji_Dragonfly_Entry" x="12" y="21">
    <field name="NAME">Doji_Dragonfly_Entry</field>
    <field name="DESCRIPTION">Enters long on Dragonfly Doji or Regular Doji patterns</field>
    <statement name="INITIALIZATION">
      <block type="variables_set" id="setBodyThreshold">
        <field name="VAR" id="bodyThreshold">Body Threshold</field>
        <value name="VALUE">
          <block type="math_number" id="bodyThresholdValue">
            <field name="NUM">0.05</field>
          </block>
        </value>
        <next>
          <block type="variables_set" id="setShadowMultiplier">
            <field name="VAR" id="shadowMultiplier">Shadow Multiplier</field>
            <value name="VALUE">
              <block type="math_number" id="shadowMultiplierValue">
                <field name="NUM">2.0</field>
              </block>
            </value>
          </block>
        </next>
      </block>
    </statement>
    <statement name="ENTRY_CONDITIONS">
      <block type="entry_condition" id="Dragonfly_Long">
        <field name="NAME">Dragonfly_Long</field>
        <field name="ACTION">BUY</field>
        <value name="CHECK">
          <block type="logic_operation" id="dragonflyCheck">
            <field name="OP">AND</field>
            <value name="A">
              <block type="logic_compare" id="bodyCheck">
                <field name="OP">LTE</field>
                <value name="A">
                  <block type="math_arithmetic" id="bodySize">
                    <field name="OP">ABS</field>
                    <value name="A">
                      <block type="math_arithmetic" id="closeMinusOpen">
                        <field name="OP">MINUS</field>
                        <value name="A">
                          <block type="market_data" id="closePrice">
                            <field name="DATA_TYPE">close</field>
                          </block>
                        </value>
                        <value name="B">
                          <block type="market_data" id="openPrice">
                            <field name="DATA_TYPE">open</field>
                          </block>
                        </value>
                      </block>
                    </value>
                  </block>
                </value>
                <value name="B">
                  <block type="math_arithmetic" id="totalRange">
                    <field name="OP">MULTIPLY</field>
                    <value name="A">
                      <block type="math_arithmetic" id="highMinusLow">
                        <field name="OP">MINUS</field>
                        <value name="A">
                          <block type="market_data" id="highPrice">
                            <field name="DATA_TYPE">high</field>
                          </block>
                        </value>
                        <value name="B">
                          <block type="market_data" id="lowPrice">
                            <field name="DATA_TYPE">low</field>
                          </block>
                        </value>
                      </block>
                    </value>
                    <value name="B">
                      <block type="variables_get" id="bodyThresholdVar">
                        <field name="VAR" id="bodyThreshold">Body Threshold</field>
                      </block>
                    </value>
                  </block>
                </value>
              </block>
            </value>
            <value name="B">
              <block type="logic_compare" id="upperShadowCheck">
                <field name="OP">LTE</field>
                <value name="A">
                  <block type="math_arithmetic" id="upperShadowSize">
                    <field name="OP">MINUS</field>
                    <value name="A">
                      <block type="market_data" id="highPrice2">
                        <field name="DATA_TYPE">high</field>
                      </block>
                    </value>
                    <value name="B">
                      <block type="math_arithmetic" id="maxCloseOpen">
                        <field name="OP">MAX</field>
                        <value name="A">
                          <block type="market_data" id="closePrice2">
                            <field name="DATA_TYPE">close</field>
                          </block>
                        </value>
                        <value name="B">
                          <block type="market_data" id="openPrice2">
                            <field name="DATA_TYPE">open</field>
                          </block>
                        </value>
                      </block>
                    </value>
                  </block>
                </value>
                <value name="B">
                  <block type="math_arithmetic" id="bodySize2">
                    <field name="OP">MULTIPLY</field>
                    <value name="A">
                      <block type="math_arithmetic" id="bodySize3">
                        <field name="OP">ABS</field>
                        <value name="A">
                          <block type="math_arithmetic" id="closeMinusOpen2">
                            <field name="OP">MINUS</field>
                            <value name="A">
                              <block type="market_data" id="closePrice3">
                                <field name="DATA_TYPE">close</field>
                              </block>
                            </value>
                            <value name="B">
                              <block type="market_data" id="openPrice3">
                                <field name="DATA_TYPE">open</field>
                              </block>
                            </value>
                          </block>
                        </value>
                      </block>
                    </value>
                    <value name="B">
                      <block type="math_number" id="upperShadowMultiplier">
                        <field name="NUM">0.1</field>
                      </block>
                    </value>
                  </block>
                </value>
              </block>
            </value>
            <value name="C">
              <block type="logic_compare" id="lowerShadowCheck">
                <field name="OP">GTE</field>
                <value name="A">
                  <block type="math_arithmetic" id="lowerShadowSize">
                    <field name="OP">MINUS</field>
                    <value name="A">
                      <block type="math_arithmetic" id="minCloseOpen">
                        <field name="OP">MIN</field>
                        <value name="A">
                          <block type="market_data" id="closePrice4">
                            <field name="DATA_TYPE">close</field>
                          </block>
                        </value>
                        <value name="B">
                          <block type="market_data" id="openPrice4">
                            <field name="DATA_TYPE">open</field>
                          </block>
                        </value>
                      </block>
                    </value>
                    <value name="B">
                      <block type="market_data" id="lowPrice2">
                        <field name="DATA_TYPE">low</field>
                      </block>
                    </value>
                  </block>
                </value>
                <value name="B">
                  <block type="math_arithmetic" id="bodySize4">
                    <field name="OP">MULTIPLY</field>
                    <value name="A">
                      <block type="math_arithmetic" id="bodySize5">
                        <field name="OP">ABS</field>
                        <value name="A">
                          <block type="math_arithmetic" id="closeMinusOpen3">
                            <field name="OP">MINUS</field>
                            <value name="A">
                              <block type="market_data" id="closePrice5">
                                <field name="DATA_TYPE">close</field>
                              </block>
                            </value>
                            <value name="B">
                              <block type="market_data" id="openPrice5">
                                <field name="DATA_TYPE">open</field>
                              </block>
                            </value>
                          </block>
                        </value>
                      </block>
                    </value>
                    <value name="B">
                      <block type="variables_get" id="shadowMultiplierVar">
                        <field name="VAR" id="shadowMultiplier">Shadow Multiplier</field>
                      </block>
                    </value>
                  </block>
                </value>
              </block>
            </value>
          </block>
        </value>
      </block>
      <block type="entry_condition" id="Regular_Doji_Long">
        <field name="NAME">Regular_Doji_Long</field>
        <field name="ACTION">BUY</field>
        <value name="CHECK">
          <block type="logic_operation" id="regularDojiCheck">
            <field name="OP">AND</field>
            <value name="A">
              <block type="logic_compare" id="bodyCheck2">
                <field name="OP">LTE</field>
                <value name="A">
                  <block type="math_arithmetic" id="bodySize6">
                    <field name="OP">ABS</field>
                    <value name="A">
                      <block type="math_arithmetic" id="closeMinusOpen4">
                        <field name="OP">MINUS</field>
                        <value name="A">
                          <block type="market_data" id="closePrice6">
                            <field name="DATA_TYPE">close</field>
                          </block>
                        </value>
                        <value name="B">
                          <block type="market_data" id="openPrice6">
                            <field name="DATA_TYPE">open</field>
                          </block>
                        </value>
                      </block>
                    </value>
                  </block>
                </value>
                <value name="B">
                  <block type="math_arithmetic" id="totalRange2">
                    <field name="OP">MULTIPLY</field>
                    <value name="A">
                      <block type="math_arithmetic" id="highMinusLow2">
                        <field name="OP">MINUS</field>
                        <value name="A">
                          <block type="market_data" id="highPrice3">
                            <field name="DATA_TYPE">high</field>
                          </block>
                        </value>
                        <value name="B">
                          <block type="market_data" id="lowPrice3">
                            <field name="DATA_TYPE">low</field>
                          </block>
                        </value>
                      </block>
                    </value>
                    <value name="B">
                      <block type="math_arithmetic" id="bodyThresholdMultiplier">
                        <field name="OP">MULTIPLY</field>
                        <value name="A">
                          <block type="variables_get" id="bodyThresholdVar2">
                            <field name="VAR" id="bodyThreshold">Body Threshold</field>
                          </block>
                        </value>
                        <value name="B">
                          <block type="math_number" id="bodyThresholdFactor">
                            <field name="NUM">0.6</field>
                          </block>
                        </value>
                      </block>
                    </value>
                  </block>
                </value>
              </block>
            </value>
            <value name="B">
              <block type="logic_compare" id="totalRangeCheck">
                <field name="OP">GT</field>
                <value name="A">
                  <block type="math_arithmetic" id="totalRange3">
                    <field name="OP">MINUS</field>
                    <value name="A">
                      <block type="market_data" id="highPrice4">
                        <field name="DATA_TYPE">high</field>
                      </block>
                    </value>
                    <value name="B">
                      <block type="market_data" id="lowPrice4">
                        <field name="DATA_TYPE">low</field>
                      </block>
                    </value>
                  </block>
                </value>
                <value name="B">
                  <block type="math_arithmetic" id="closeMultiplier">
                    <field name="OP">MULTIPLY</field>
                    <value name="A">
                      <block type="market_data" id="closePrice7">
                        <field name="DATA_TYPE">close</field>
                      </block>
                    </value>
                    <value name="B">
                      <block type="math_number" id="rangeMultiplier">
                        <field name="NUM">0.0015</field>
                      </block>
                    </value>
                  </block>
                </value>
              </block>
            </value>
          </block>
        </value>
      </block>
    </statement>
  </block>
</xml>
